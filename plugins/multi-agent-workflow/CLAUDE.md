# Multi-Agent Workflow Plugin

A compound engineering framework for coordinating multiple AI agents working in parallel on software development.

## Philosophy

> **"Each unit of engineering work should make subsequent units easier—not harder"**
> — Compound Engineering Principle

This plugin extends compound engineering with:

1. **Shared Technical Context**: Agents work with predefined rules (DDD, TDD, project conventions)
2. **Parallel Generation**: Code generated by multiple agents coordinated by roles or layers
3. **Quality Compounding**: Each feature captures learnings for future development

## Quick Start

```bash
# Install the plugin
/plugin marketplace add https://github.com/arazvan-ec/workflow
/plugin install multi-agent-workflow

# Plan a feature (80% of compound engineering)
/workflows:plan user-authentication

# Execute with specific mode
/workflows:work --mode=roles --role=backend user-authentication
/workflows:work --mode=layers --layer=domain user-authentication

# Review before merge
/workflows:review user-authentication

# Capture learnings (compound effect)
/workflows:compound user-authentication
```

## Core Workflows (4 Phases)

| Phase | Command | Purpose | Time |
|-------|---------|---------|------|
| **Plan** | `/workflows:plan` | Convert ideas into implementable strategies | 40% |
| **Work** | `/workflows:work` | Execute with worktrees and task management | 40% |
| **Review** | `/workflows:review` | Multi-agent review before merge | 15% |
| **Compound** | `/workflows:compound` | Capture insights for future work | 5% |

## Parallelization Modes

### By Role (Standard)
```
Planner → Backend + Frontend → QA
```
Best for: Full-stack features with separate concerns

### By Layer (DDD)
```
Domain + Application + Infrastructure (parallel)
```
Best for: Complex backend with business logic

### By Stack
```
Backend complete + Frontend complete (parallel)
```
Best for: Independent features or separate teams

## Agent Categories

| Category | Count | Purpose |
|----------|-------|---------|
| **Roles** | 4 | Core development roles (planner, backend, frontend, qa) |
| **Review** | 4 | Quality assurance (security, performance, DDD, code) |
| **Research** | 3 | Codebase analysis (analyzer, git history, dependencies) |
| **Workflow** | 3 | Automation (bug reproducer, spec analyzer, style enforcer) |
| **Design** | 2 | Architecture (API designer, UI verifier) |

## Multi-Agent Commands

| Command | Description |
|---------|-------------|
| `/workflows:role` | Work as a specific role on a feature |
| `/workflows:sync` | Synchronize state between agents |
| `/workflows:status` | View status of all roles |

## Skills

| Skill | Description |
|-------|-------------|
| **Core** | consultant, checkpoint, git-sync |
| **Quality** | test-runner, coverage-checker, lint-fixer |
| **Workflow** | worktree-manager, commit-formatter |
| **Compound** | changelog-generator, layer-validator |

## Key Patterns

### Ralph Wiggum Pattern (Auto-Correction Loop)
```
while tests_failing and iterations < 10:
    fix_code()
    run_tests()
    if passing: checkpoint_complete()

if iterations >= 10:
    mark_blocked()
    document_for_help()
```

### Compound Capture Pattern
After each feature:
1. Review commits and PRs
2. Identify patterns/anti-patterns
3. Update project rules automatically
4. Document in compound_log.md

### Context Management (Commodore 64)
- Treat context as limited resource
- Checkpoint frequently for session resumption
- Signal to restart: >20 files, >2 hours, >50 messages

## State Management

All roles communicate via `50_state.md`:

```markdown
## Backend Engineer
**Status**: IN_PROGRESS
**Checkpoint**: Domain layer complete
**Notes**: Working on Application layer
```

Status values: `PENDING`, `IN_PROGRESS`, `BLOCKED`, `WAITING_API`, `COMPLETED`, `APPROVED`, `REJECTED`

## Project Structure

```
plugins/multi-agent-workflow/
├── .claude-plugin/
│   └── plugin.json
├── agents/
│   ├── roles/           # 4 core roles
│   ├── review/          # 4 review agents
│   ├── research/        # 3 research agents
│   ├── workflow/        # 3 workflow agents
│   └── design/          # 2 design agents
├── commands/
│   └── workflows/
│       ├── plan.md
│       ├── work.md
│       ├── review.md
│       ├── compound.md
│       ├── role.md
│       ├── sync.md
│       └── status.md
├── skills/
│   ├── consultant/
│   ├── checkpoint/
│   ├── git-sync/
│   ├── test-runner/
│   ├── coverage-checker/
│   ├── lint-fixer/
│   ├── worktree-manager/
│   ├── commit-formatter/
│   ├── changelog-generator/
│   └── layer-validator/
├── rules/
│   ├── global_rules.md
│   ├── ddd_rules.md
│   └── project_specific.md
├── CLAUDE.md
└── README.md
```

## Best Practices

1. **80% Planning, 20% Execution**: Invest in planning with `/workflows:plan`
2. **One role per session**: Don't switch roles mid-conversation
3. **Sync before work**: Always pull latest changes first
4. **TDD always**: Write tests before implementation
5. **Compound always**: Run `/workflows:compound` after each feature

## Integration

This plugin works best with:
- **Git**: For synchronization between agents
- **Tilix/tmux**: For running multiple roles in parallel
- **Symfony/React**: Optimized for this stack (but adaptable)
- **DDD Architecture**: Domain-Driven Design patterns

---

**Version**: 2.0.0
**Aligned with**: Compound Engineering principles
**Last updated**: 2026-01-16
