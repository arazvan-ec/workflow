# config/services/decorators.yaml
# Optional decorators for cross-cutting concerns
# Enable by uncommenting and adjusting configuration

services:
    _defaults:
        autowire: true
        autoconfigure: true

    # =================================================================
    # Cached Gateway Decorator (Optional)
    # =================================================================
    # Uncomment to enable caching for EditorialGateway
    #
    # App\Infrastructure\Gateway\Decorator\CachedGatewayDecorator:
    #     decorates: App\Domain\Port\Gateway\EditorialGatewayInterface
    #     arguments:
    #         $inner: '@.inner'
    #         $cache: '@cache.app'
    #         $ttl: 300  # 5 minutes

    # =================================================================
    # Circuit Breaker Decorator (Optional)
    # =================================================================
    # Uncomment to enable circuit breaker for EditorialGateway
    #
    # App\Infrastructure\Gateway\Decorator\CircuitBreakerDecorator:
    #     decorates: App\Domain\Port\Gateway\EditorialGatewayInterface
    #     decoration_priority: 10  # Higher priority = wraps outer
    #     arguments:
    #         $inner: '@.inner'
    #         $failureThreshold: 5
    #         $recoveryTimeout: 30

    # =================================================================
    # Stacked Decorators Example
    # =================================================================
    # To stack decorators (Circuit Breaker -> Cache -> Gateway):
    #
    # 1. Cache wraps Gateway (priority 5)
    # App\Infrastructure\Gateway\Decorator\CachedGatewayDecorator:
    #     decorates: App\Domain\Port\Gateway\EditorialGatewayInterface
    #     decoration_priority: 5
    #     arguments:
    #         $inner: '@.inner'
    #
    # 2. Circuit Breaker wraps Cache (priority 10)
    # App\Infrastructure\Gateway\Decorator\CircuitBreakerDecorator:
    #     decorates: App\Domain\Port\Gateway\EditorialGatewayInterface
    #     decoration_priority: 10
    #     arguments:
    #         $inner: '@.inner'
